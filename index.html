<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>工具箱 — 暗色</title>
<style>
  :root{--bg:#0b1020;--card:#0f1724;--accent:#ff7b72;--muted:#9aa3b2}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, "Microsoft YaHei", sans-serif;background:var(--bg);color:#eef2ff}
  .wrap{max-width:1100px;margin:36px auto;padding:20px}
  header{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#a34bff);display:flex;align-items:center;justify-content:center;font-weight:700}
  h1{margin:0;font-size:20px}
  .search{margin-left:auto}
  input{background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:8px 12px;border-radius:10px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:18px}
  .card{background:var(--card);padding:14px;border-radius:12px;transition:transform .15s,box-shadow .15s}
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(8,10,20,0.6)}
  .title{font-weight:700}
  .desc{color:var(--muted);font-size:13px;margin:8px 0}
  .meta{font-size:12px;color:var(--muted)}
  .actions{display:flex;gap:8px;margin-top:10px}
  .btn{padding:8px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
  .btn.primary{background:linear-gradient(90deg,var(--accent),#7b3bff);color:#0b0b0b}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted)}
  footer{margin-top:22px;color:var(--muted);text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo">TO</div>
    <div><h1>工具箱（暗）</h1><div style="color:var(--muted);font-size:13px">漂亮的工具卡片视图</div></div>
    <div class="search"><input id="q" placeholder="搜索..." oninput="render()"/></div>
  </header>

  <div id="grid" class="grid"></div>
  <footer>把新工具加入 <code>tools.json</code> 即可自动显示。</footer>
</div>

<script>
const defaultTools = [
  {"title":"SRT 去时间码","desc":"去 SRT 时间戳","file":"srt.html"},
  {"title":"PDF→PNG","desc":"导出PNG","file":"pdf-to-png.html"},
  {"title":"图片压缩","desc":"按大小压缩","file":"image-compress.html"}
];
let tools=[];
async function load(){ try{ const r=await fetch('tools.json',{cache:'no-cache'}); if(r.ok) tools=await r.json(); else tools=defaultTools}catch(e){tools=defaultTools} render(); }
function render(){
  const q=(document.getElementById('q').value||'').toLowerCase().trim();
  const g=document.getElementById('grid'); g.innerHTML='';
  const list=tools.filter(t=>!q || (t.title+t.desc).toLowerCase().includes(q));
  if(!list.length){ g.innerHTML='<div style="grid-column:1/-1;color:#9aa3b2;padding:12px;background:transparent;border-radius:8px">无匹配结果</div>'; return }
  list.forEach(t=>{
    const d=document.createElement('div'); d.className='card';
    d.innerHTML = `<div class="title">${e(t.title)}</div><div class="desc">${e(t.desc||'')}</div><div class="meta">文件：${e(t.file)}</div>
      <div class="actions"><button class="btn primary" onclick="openP('${encodeURIComponent(t.file)}')">打开</button>
      <a class="btn ghost" href="${encodeURI(t.file)}" target="_blank">新页打开</a></div>`;
    g.appendChild(d);
  });
}
function openP(f){ const file=decodeURIComponent(f); window.open(file,'_blank') }
function e(s){return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]))}
load();
</script>
</body>
</html>
